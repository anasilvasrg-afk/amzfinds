---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import OutfitCard from '../../components/OutfitCard.astro';

// Get static paths for all seasons
export function getStaticPaths() {
  return [
    { params: { season: 'spring' } },
    { params: { season: 'summer' } },
    { params: { season: 'fall' } },
    { params: { season: 'winter' } }
  ];
}

const { season } = Astro.params;

// Import outfit data
let outfits = [];
try {
  const data = await import('../../data/outfits.json');
  outfits = (data.default || []).filter(o => o.season === season);
} catch (e) {
  console.log('No outfit data found');
}

const title = `${season.charAt(0).toUpperCase() + season.slice(1)} Outfits - Daily Fashion Finds`;
const description = `Browse our curated collection of ${season} outfit ideas. Find the perfect look for the season.`;
---

<BaseLayout title={title} description={description}>
  <Header showBack={true} backUrl="/seasons" />
  
  <main class="max-w-7xl mx-auto px-4 py-6">
    <h1 class="text-2xl font-light text-center mb-8 capitalize text-stone-800 dark:text-neutral-200">
      {season} Outfits
    </h1>
    
    {outfits.length === 0 ? (
      <div class="text-center py-12">
        <p class="text-stone-500 dark:text-neutral-400">No {season} outfits yet. Check back soon!</p>
      </div>
    ) : (
      <div class="masonry-grid">
        {outfits.map(outfit => (
          <OutfitCard outfit={outfit} />
        ))}
      </div>
    )}
  </main>
</BaseLayout>
